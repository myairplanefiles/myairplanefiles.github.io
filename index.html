<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Airplane Files</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" href="https://raw.githubusercontent.com/myairplanefiles/myairplanefiles.github.io/4653f4e49a2ba1501b09e4fe5b551293ea1354ad/Logo.png" type="image/png" />
  <link rel="apple-touch-icon" sizes="180x180" href="AppleLogo.png">

<style>
:root {
  --bg: #f2f2f7;
  --card: rgba(255,255,255,0.75);
  --text: #000;
  --accent: #0a84ff;
}

body.dark {
  --bg: #0b0b0f;
  --card: rgba(28,28,30,0.8);
  --text: #fff;
}

* { box-sizing: border-box; }

html, body {
  overflow: hidden;
  height: 100%;
  width: 100%;
  touch-action: none;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  position: relative;
  transition: background 1.2s ease;
}

#topbar {
  position: fixed;
  top: 10px;
  left: 10px;
  font-family: "Roboto", monospace;
  font-size: 16px;
  background: rgba(255,255,255,0.5);
  padding: 8px 12px;
  border-radius: 12px;
  backdrop-filter: blur(12px);
  z-index: 100;
  text-align: left;
  line-height: 1.4;
}

#themeSwitch {
  position: fixed;
  top: 10px;
  right: 10px;
  font-size: 22px;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.25);
  backdrop-filter: blur(12px);
  background: rgba(255,255,255,0.5);
  z-index: 100;
  transition: transform 0.3s ease;
}
#themeSwitch:hover { transform: scale(1.1); }

.screen {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 0 20px;
  transform: translateX(120%);
  transition: transform 1.2s cubic-bezier(.2,.9,.15,1);
}
.screen.active { transform: translateX(0); }

.card {
  width: 100%;
  max-width: 460px;
  min-width: 320px;
  background: var(--card);
  backdrop-filter: blur(30px) saturate(160%);
  border-radius: 28px;
  padding: 32px;
  box-shadow: 0 40px 80px rgba(0,0,0,0.35);
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.menu { display: grid; gap: 12px; }

input {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  margin: 10px 0;
  font-size: 16px;
}

button {
  width: 100%;
  padding: 15px;
  border-radius: 16px;
  border: none;
  background: linear-gradient(135deg, #0a84ff, #64d2ff);
  color: white;
  font-size: 17px;
  cursor: pointer;
  transition: transform 0.45s ease, box-shadow 0.45s ease;
}

button:hover {
  transform: scale(1.04);
  box-shadow: 0 12px 30px rgba(10,132,255,0.5);
}

.small {
  background: transparent;
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.4);
}

.viewer-wrap {
  width: 100%;
  max-width: 900px;
  height: 88vh;
  background: var(--card);
  backdrop-filter: blur(30px);
  border-radius: 28px;
  padding: 14px;
  box-shadow: 0 40px 80px rgba(0,0,0,0.35);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

iframe, img {
  width: 100%;
  height: 100%;
  border-radius: 18px;
  border: none;
}

#imgFrame {
  object-fit: contain;
  max-width: 100%;
  max-height: 100%;
}

.siri-bg {
  position: absolute;
  inset: -25%;
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 99, 132, 0.9), transparent 45%),
    radial-gradient(circle at 80% 20%, rgba(90, 200, 250, 0.9), transparent 45%),
    radial-gradient(circle at 50% 80%, rgba(191, 90, 242, 0.9), transparent 45%),
    radial-gradient(circle at 30% 70%, rgba(52, 199, 89, 0.9), transparent 45%);
  filter: blur(90px) saturate(160%);
  animation: siriFlow 26s infinite alternate ease-in-out;
  z-index: -1;
}

@keyframes siriFlow {
  0%   { transform: scale(1) translate(0,0); }
  50%  { transform: scale(1.15) translate(-6%, 6%); }
  100% { transform: scale(1.3) translate(6%, -6%); }
}

.flip-text {
  display: flex;
  justify-content: center;
  font-family: "SF Mono", monospace;
  font-size: 42px;
  font-weight: 600;
  letter-spacing: 6px;
  perspective: 800px;
  margin-bottom: 12px;
}

.flip-char {
  width: 32px;
  height: 56px;
  position: relative;
  margin: 0 2px;
  perspective: 600px;
}

.flip-char span {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111;
  color: #0a84ff;
  border-radius: 6px;
  backface-visibility: hidden;
  transition: transform 0.6s cubic-bezier(.2,.8,.2,1);
}

.flip-char .front { transform: rotateX(0deg); }
.flip-char.flip .front { transform: rotateX(-180deg); }
.flip-char .back { transform: rotateX(180deg); }
.flip-char.flip .back { transform: rotateX(0deg); }

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(10px);
  opacity: 0;
  pointer-events: none;
  transition: 0.6s ease;
  z-index: 50;
}
.modal.active { opacity: 1; pointer-events: auto; }
.modal .card { max-width: 480px; width: 90%; }

#metarResultBox {
  width: 100%;
  background: rgba(10,132,255,0.85);
  color: white;
  font-family: "Roboto", sans-serif;
  font-weight: 700;
  padding: 12px;
  border-radius: 16px;
  margin-bottom: 12px;
  text-align: center;
}

#disclaimer {
  position: fixed;
  bottom: 12px;
  left: 12px;
  font-size: 13px;
  font-family: "Roboto", sans-serif;
  color: rgba(0,0,0,0.7);
  z-index: 200;
}
#disclaimer a {
  color: var(--accent);
  text-decoration: none;
}
#disclaimer a:hover {
  text-decoration: underline;
}
</style>
</head>
<body>

<div id="topbar">
  ZULU: <span id="zuluTime">--:--:--</span><br>
  <span id="zuluDate">--/--/----</span>
</div>

<div id="themeSwitch" onclick="toggleTheme()">üåó</div>

<div id="disclaimer">
  QRH by 
  <a href="https://fenixsim.com" target="_blank" rel="noopener noreferrer">Fenix Simulations</a><br>
  METAR by 
  <a href="https://www.checkwx.com" target="_blank" rel="noopener noreferrer">CheckWX</a><br>
  ‚ö†Ô∏è NOT FOR REAL WORLD USE ‚ö†Ô∏è (v1.8)
</div>

<!-- LOGIN -->
<div id="login" class="screen active">
  <div class="siri-bg"></div>
  <div class="card">
    <div class="flip-text" id="flipText"></div>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>
</div>

<!-- MAIN -->
<div id="main" class="screen">
  <div class="card menu">
    <h1>Flight Docs</h1>
    <button onclick="go('qrh')">QRH</button>
    <button onclick="go('checklists')">Checklists</button>
    <button onclick="requestMetar()">METAR</button>
    <button style="pointer-events:none; background: rgba(0,0,0,0.4); color: #fff; cursor: not-allowed;">üîí</button>
  </div>
</div>

<!-- METAR modal -->
<div id="metarModal" class="modal">
  <div class="card">
    <h2>METAR Request</h2>
    <div id="metarResultBox">METAR will appear here</div>
    <input id="icaoInput" placeholder="Enter ICAO code">
    <div style="display:flex; gap:12px; margin-top:12px;">
      <button style="flex:1" onclick="fetchMetar()">Get METAR</button>
      <button style="flex:1" onclick="closeModal('metarModal')">Close</button>
    </div>
  </div>
</div>

<!-- WINDY modal -->
<div id="windyModal" class="modal">
  <div class="card">
    <h2>Windy Map</h2>
    <div id="windyMapBox" style="width:100%; height:400px; border-radius:16px; overflow:hidden; background:#111;">
      Enter ICAO and click "Show"
    </div>
    <input id="windyInput" placeholder="Enter ICAO code">
    <div style="display:flex; gap:12px; margin-top:12px;">
      <button style="flex:1" onclick="showWindy()">Show</button>
      <button style="flex:1" onclick="closeModal('windyModal')">Close</button>
    </div>
  </div>
</div>

<!-- QRH -->
<div id="qrh" class="screen">
  <div class="card menu">
    <button class="small" onclick="back()">‚¨Ö Back</button>
    <h1>Select Aircraft</h1>
    <h4>ALL airplanes listed below use the A320 QRH.</h4>
    <button onclick="go('engine')">A319</button>
    <button onclick="go('engine')">A320</button>
    <button onclick="go('engine')">A321</button>
  </div>
</div>

<!-- ENGINE -->
<div id="engine" class="screen">
  <div class="card menu">
    <button class="small" onclick="back()">‚¨Ö Back</button>
    <h1>Select Engine</h1>
    <button onclick="openViewer('A320 QRH - IAE','https://docs.google.com/gview?embedded=true&url=https://raw.githubusercontent.com/mateitomensajero/fnxqrhs/dd1b02eeadc96b82bb4df65a598d2f5292b96725/Fenix%20IAE%20QRH.pdf')">IAE</button>
    <button onclick="openViewer('A320 QRH - CFM','https://docs.google.com/gview?embedded=true&url=https://raw.githubusercontent.com/mateitomensajero/fnxqrhs/dd1b02eeadc96b82bb4df65a598d2f5292b96725/Fenix%20CFM%20QRH.pdf')">CFM</button>
  </div>
</div>

<!-- CHECKLISTS -->
<div id="checklists" class="screen">
  <div class="card menu">
    <button class="small" onclick="back()">‚¨Ö Back</button>
    <h1>Select Aircraft</h1>
    <button onclick="openChecklist('A319 Checklist','https://cdn.flightsim.to/images/27/a319a320a321-checklist--457255-1731234405-8b9fm.jpg?width=800')">A319</button>
    <button onclick="openChecklist('A320 Checklist','https://cdn.x-plane.to/images/01/airbus-a32x-checklist-2022-38PzO.jpg?width=1400&auto_optimize=medium')">A320</button>
    <button onclick="openChecklist('A321 Checklist','https://media.invisioncic.com/c334187/monthly_2025_11/92ad0a11_a245_4004_8835_5a255ac88ba1_6b78677008f43dd5a6b6c52d0621b0dc0c28fc88.jpeg.18ce901d51b1bbe3a23ff6db56161f4d.jpeg')">A321</button>
  </div>
</div>

<!-- VIEWER -->
<div id="viewer" class="screen">
  <div class="viewer-wrap">
    <button class="small" style="align-self:flex-start;" onclick="back()">‚¨Ö Back</button>
    <h2 id="viewerTitle"></h2>
    <iframe id="pdfFrame"></iframe>
    <img id="imgFrame" style="display:none" />
  </div>
</div>

<!-- ERROR MODAL -->
<div id="modal" class="modal">
  <div class="card">
    <h2 id="modalTitle">Error</h2>
    <p id="modalMsg"></p>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
// LOGIN
const LOGINACCEPTED=[{user:"CAPI.a",password:"lorenzo1."},{user:"Pilotojesu",password:"PilotojesuOficial!"},{user:"981423",password:""},{user:"suspicious_popcat",password:"BestPilotEverMade"},{user:"alezilli350",password:"Alexandro.03"},{user:"QNHSET",password:"qnhsetofficial"}];
let historyStack=["login"];
function go(id){document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));document.getElementById(id).classList.add("active");historyStack.push(id);}
function back(){historyStack.pop();const prev=historyStack[historyStack.length-1]||"main";document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));document.getElementById(prev).classList.add("active");}
function login(){const ok=LOGINACCEPTED.some(a=>a.user===user.value&&a.password===pass.value);if(!ok)return showModal("Login Failed","Incorrect username or password.");go("main");}
function openViewer(title,url){viewerTitle.innerText=title;const isPDF=url.includes(".pdf");pdfFrame.style.display=isPDF?"block":"none";imgFrame.style.display=isPDF?"none":"block";if(isPDF) pdfFrame.src=url;else imgFrame.src=url;go("viewer");}

// CHECKLISTS
function openChecklist(title, url){
    imgFrame.style.display = "block";
    pdfFrame.style.display = "none";
    imgFrame.src = url;
    viewerTitle.innerText = "";
    if(title.includes("A319")) { imgFrame.style.maxWidth = "800px"; imgFrame.style.maxHeight = "70vh"; } 
    else if(title.includes("A320")) { imgFrame.style.maxWidth = "1400px"; imgFrame.style.maxHeight = "65vh"; } 
    else if(title.includes("A321")) { imgFrame.style.maxWidth = "1200px"; imgFrame.style.maxHeight = "60vh"; }
    go("viewer");
}

function showModal(title,msg){modalTitle.innerText=title;modalMsg.innerText=msg;modal.classList.add("active");}
function closeModal(modalId="modal"){document.getElementById(modalId).classList.remove("active");}
function toggleTheme(){document.body.classList.toggle("dark");}

// Flip Clock
const flipText=document.getElementById("flipText");
function createFlip(chars){flipText.innerHTML="";chars.forEach(c=>{const d=document.createElement("div");d.className="flip-char";d.innerHTML=`<span class="front">${c}</span><span class="back"></span>`;flipText.appendChild(d);});}
function addTile(char=""){const d=document.createElement("div");d.className="flip-char";d.innerHTML=`<span class="front"></span><span class="back">${char}</span>`;flipText.appendChild(d);return d;}
function flipTo(text){const chars=text.split("");if(chars.length===5&&flipText.children.length===4)addTile("");[...flipText.children].forEach((el,i)=>{setTimeout(()=>{el.querySelector(".back").innerText=chars[i]||"";el.classList.add("flip");setTimeout(()=>{el.querySelector(".front").innerText=chars[i]||"";el.classList.remove("flip");},650);},i*500);});if(chars.length===4&&flipText.children.length===5){const last=flipText.lastElementChild;setTimeout(()=>{last.querySelector(".back").innerText="";last.classList.add("flip");setTimeout(()=>flipText.removeChild(last),650);},2200);}}
createFlip(["A","3","2","0"]);function loopFlip(){setTimeout(()=>flipTo("HELLO"),600);setTimeout(()=>flipTo("A320"),4800);}loopFlip();setInterval(loopFlip,9500);

// ZULU TIME
function updateZulu() {
  const now = new Date();
  const hh = String(now.getUTCHours()).padStart(2, "0");
  const mm = String(now.getUTCMinutes()).padStart(2, "0");
  document.getElementById("zuluTime").innerText = `${hh}${mm}z`;
  document.getElementById("zuluDate").innerText = now.toISOString().slice(0, 10);
}
setInterval(updateZulu,1000);updateZulu();

// METAR
function requestMetar() {
  document.getElementById("metarModal").classList.add("active");
  document.getElementById("metarResultBox").innerText = "METAR will appear here";
  document.getElementById("icaoInput").value = "";
}

async function fetchMetar() {
  const icao = document.getElementById("icaoInput").value.trim().toUpperCase();
  const resultBox = document.getElementById("metarResultBox");
  if (!icao || icao.length !== 4) { showModal("Invalid ICAO", "Enter a valid 4‚Äëletter ICAO code"); return; }
  resultBox.innerText = "Fetching METAR‚Ä¶";
  try {
    const apiKey = "c0f5316355f24801baf0a280e916e467";
    const url = `https://api.checkwx.com/metar/${icao}`;
    const resp = await fetch(url, { headers: { "X-API-Key": apiKey } });
    if (!resp.ok) throw new Error("METAR fetch failed");
    const json = await resp.json();
    const metarText = (json.data && json.data.length > 0) ? json.data[0] : "METAR not found";
    resultBox.innerText = metarText;
  } catch (err) {
    console.error(err);
    resultBox.innerText = "Error fetching METAR";
  }
}

document.getElementById("icaoInput").addEventListener("keydown", e => { if (e.key === "Enter") fetchMetar(); });

// WINDY
function requestWindy() {
  document.getElementById("windyModal").classList.add("active");
  document.getElementById("windyMapBox").innerText = "Enter ICAO and click 'Show'";
  document.getElementById("windyInput").value = "";
}

function showWindy() {
  const icao = document.getElementById("windyInput").value.trim().toUpperCase();
  const box = document.getElementById("windyMapBox");
  if (!icao || icao.length !== 4) { showModal("Invalid ICAO", "Enter a valid 4‚Äëletter ICAO code"); return; }

  fetch(`https://avwx.rest/api/station/${icao}?token=demo`)
    .then(res => res.json())
    .then(data => {
      const lat = data.latitude || 0;
      const lon = data.longitude || 0;
      const iframe = document.createElement("iframe");
      iframe.src = `https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&zoom=8&level=surface&overlay=wind&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=kt&metricTemp=%C2%B0C&radarRange=-1`;
      iframe.style.width = "100%";
      iframe.style.height = "400px";
      iframe.style.border = "none";
      iframe.style.borderRadius = "16px";
      box.innerHTML = "";
      box.appendChild(iframe);
    })
    .catch(err => { console.error(err); box.innerText = "Failed to load Windy map"; });
}

document.getElementById("windyInput").addEventListener("keydown", e => { if(e.key==="Enter") showWindy(); });

// Prevent mobile scrolling
document.addEventListener('touchmove', function(e){e.preventDefault();},{passive:false});
</script>
</body>
</html>
